# Karabiner Configuration

Modular Karabiner-Elements configuration built from composable JSON files.

## Structure

```
.
├── build/                           # Build templates
│   ├── header.json                 # Opening JSON with simple_modifications
│   └── footer.json                 # Closing JSON
├── rules/                           # Rule definitions (source files)
│   ├── caps_lock.json              # Caps Lock to Control/Escape
│   ├── vim_navigation.json         # Command+HJKL arrow mappings
│   └── window_management.json      # Terminal, window, Mission Control
├── build_config.sh                  # Build script
├── write_apple_hotkeys.sh           # macOS system hotkeys configuration
├── karabiner.json                   # Generated (do not edit directly)
└── assets/                          # Generated by Karabiner UI (gitignored)
```

## Usage

### Building the Configuration

After modifying any rule files in `rules/` or build templates, rebuild:

```bash
./build_config.sh
```

Karabiner will automatically reload the new configuration.

### Adding New Rules

1. Create a new JSON file in `rules/` with just the rule object:

```json
{
    "description": "Rule description",
    "manipulators": [
        {
            "type": "basic",
            "from": { "key_code": "..." },
            "to": [{ "key_code": "..." }]
        }
    ]
}
```

2. Run `./build_config.sh` (auto-discovers all `.json` files in `rules/`)

### Current Mappings

**Simple Modifications:**
- Alt (Option) → Command
- Windows key (GUI) → Option

**Complex Rules:**
- Caps Lock → Control (hold) / Escape (tap)
- Option+T → Spawn Kitty terminal
- Option+X → Close window (Cmd+W)
- Option+Shift+; → Mission Control
- Cmd+H/J/K/L → Arrow keys (←↓↑→)
- Ctrl+Cmd+H/J/K/L → Ctrl+Arrow keys

**Desktop Switching (macOS):**
- Run `./write_apple_hotkeys.sh` to configure Option+1-9 for desktop switching
- Option+; → Spotlight

## Requirements

- [Karabiner-Elements](https://karabiner-elements.pqrs.org/)

```bash
brew install --cask karabiner-elements
```

## Version Control

Generated files are gitignored (`karabiner.json`, `assets/`). Only source files are tracked:
- `build/` (header.json, footer.json)
- `rules/` (all rule files)
- `build_config.sh`
- `write_apple_hotkeys.sh`
